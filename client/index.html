<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <meta name="description" content="Create your WhatsApp shop in minutes. Customize, share, and sell smarter." />
    
    <!-- PWA Configuration -->
    <link rel="manifest" href="/manifest.json" />
  <meta name="theme-color" content="#F97316" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="WaZhop" />
  <!-- Use PNG for iOS A2HS (generated prebuild); SVG remains the favicon -->
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png?v=4" />
  <link rel="icon" href="/wazhop-icon.svg?v=4" type="image/svg+xml" />
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32.png?v=4" />
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16.png?v=4" />
    
    <!-- Inline splash styles (no extra network trip) -->
    <style>
      html, body { height: 100%; }
      body.splashing { overflow: hidden; }
      :root { --brand: #F97316; }
  /* Keep app hidden while splash is visible */
  body.splashing #root { visibility: hidden; pointer-events: none; }
  #app-splash { position: fixed; inset: 0; z-index: 2147483647; display: grid; place-items: center; background: linear-gradient(180deg,#FB923C,#F97316,#EA580C); transition: opacity .35s ease; width: 100vw; height: 100dvh; min-height: 100vh; padding-top: env(safe-area-inset-top); padding-bottom: env(safe-area-inset-bottom); }
      #app-splash .splash-inner { display:flex; flex-direction:column; align-items:center; }
      #app-splash .splash-logo { width: 72px; height: 72px; border-radius: 16px; box-shadow: 0 8px 24px rgba(0,0,0,.25); }
      #app-splash .splash-title { margin-top: 12px; font-family: Inter, ui-sans-serif, system-ui; font-weight: 800; color: #fff; font-size: 24px; letter-spacing: .2px; text-shadow: 0 1px 2px rgba(0,0,0,.25); }
      #app-splash .splash-spinner { margin-top: 18px; width: 28px; height: 28px; border: 3px solid rgba(255,255,255,.35); border-top-color: #fff; border-radius: 50%; animation: spin 1s linear infinite; }
      @keyframes spin { to { transform: rotate(360deg); } }
      .dark #app-splash { background: linear-gradient(180deg,#7C2D12,#9A3412,#7C2D12); }
    </style>
    
    <title>WaZhop - WhatsApp Shop Builder</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://res.cloudinary.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Poppins:wght@600;700;800&display=swap" rel="stylesheet">
    <script>
      // Prevent flash of wrong theme and fix BFCache back/forward cases
      (function() {
        function applySavedTheme() {
          try {
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.documentElement.classList.toggle('dark', savedTheme === 'dark');
          } catch (e) {
            // Default to light if storage is blocked
            document.documentElement.classList.remove('dark');
          }
        }

        // Initial apply on first paint
        applySavedTheme();

        // Re-apply when page is restored from BFCache (e.g., browser Back)
        window.addEventListener('pageshow', function(ev) {
          if (ev.persisted) {
            applySavedTheme();
          }
        });
      })();
    </script>
  </head>
  <body>
    <script>
      // Inject splash only for dashboard (/dashboard) and login/register; storefront is explicitly excluded
      (function() {
        var path = location.pathname;
        var marketing = ['/', '/about', '/pricing', '/how-it-works', '/contact', '/login', '/register', '/privacy-policy', '/terms-of-service'];
        var isMarketing = marketing.indexOf(path) !== -1 || path.startsWith('/demo');
        var isLogin = path === '/login' || path === '/register';
  var isDashboard = path.startsWith('/dashboard');
  // Exclude storefront from splash. Only dashboard and login/register should show it.
  var shouldSplash = isDashboard || isLogin;
        if (!shouldSplash) return;

        window.__SPLASH_START = (window.performance && performance.now) ? performance.now() : Date.now();
        document.body.classList.add('splashing');
        var wrap = document.createElement('div');
        wrap.id = 'app-splash';
        wrap.setAttribute('aria-hidden','true');
        wrap.innerHTML = '<div class="splash-inner">\
          <img src="/wazhop-icon.svg?v=2" alt="WaZhop logo" class="splash-logo" decoding="async" />\
          <div class="splash-title">WaZhop</div>\
          <div class="splash-spinner" role="progressbar" aria-label="Loading" aria-valuetext="Loading"></div>\
        </div>';
        document.currentScript.insertAdjacentElement('afterend', wrap);
      })();
    </script>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>
